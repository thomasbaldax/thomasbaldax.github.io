function toggleMobileMenu(){let e=document.getElementById("mobileNav");e.classList.toggle("active")}function closeMobileMenu(){let e=document.getElementById("mobileNav");e.classList.remove("active")}function loadImages(){let e=Object.entries({artwork1:"images/ritratto-famiglia.webp",artwork2:"images/avventure-famiglia.webp",artwork3:"images/volpe-nove-code.webp",artwork4:"images/studio-ritratto.webp",artwork5:"images/mare.webp",artwork6:"images/ritratto.webp",artwork7:"images/cavalluccio.webp",artwork8:"images/fumetto.webp",artwork9:"images/fumetto2.webp",artwork10:"images/fumetto3.webp",artwork11:"images/fumetto4.webp",artwork12:"images/fumetto5.webp",artwork13:"images/immersione.webp",artwork14:"images/summer.webp",artwork15:"images/pokemon.webp",artwork16:"images/comunione.webp",artwork17:"images/festadellaliberta.webp",artwork18:"images/telefilm.webp",artwork19:"images/avventura egitto.webp",artwork20:"images/astronauta.webp",artwork21:"images/fermata.webp",artwork22:"images/balcone.webp",artwork23:"images/avventura nella preistoria.webp",artwork24:"images/wow.webp",artwork25:"images/bimbi.webp",artwork26:"images/donna.webp",artwork27:"images/luna.webp",artwork28:"images/me.webp",artwork29:"images/relax.webp",artwork30:"images/natura.webp",artwork31:"images/bosco.webp",artwork32:"images/fiori.webp",artwork33:"images/GallegioBlu.webp",artwork34:"images/SalutoFestoso.webp",artwork35:"images/GuerrieraEterea.webp",artwork36:"images/GiardinoIncantato.webp","qr-code":"images/qr-instagram.webp","gmail-icon":"images/gmail-icon.webp","paypal-icon":"images/paypal-icon.webp"}),t=0,a=(e,t)=>{let a=document.getElementById(e);if(a){if(a.classList.contains("placeholder-image")){let r=document.createElement("img");r.id=e,r.src=t,r.alt=a.textContent.trim().replace(/<small>.*<\/small>/,"").replace(/<br>/g," "),r.loading="lazy",a.replaceWith(r)}else a.classList.contains("qr-code")&&(a.innerHTML=`<img src="${t}" alt="QR Code" style="width:100%;height:100%;object-fit:cover;border-radius:10px;" loading="lazy" width="150" height="150" />`)}};function r(){if(t>=e.length)return;let[o,l]=e[t];a(o,l),t++,"requestIdleCallback"in window?requestIdleCallback(r):setTimeout(r,16)}"requestIdleCallback"in window?requestIdleCallback(r):setTimeout(r,16)}window.addEventListener("scroll",function(){let e=document.getElementById("navbar");window.scrollY>50?e.classList.add("scrolled"):e.classList.remove("scrolled")});const observerOptions={threshold:.1,rootMargin:"0px 0px -50px 0px"},observer=new IntersectionObserver(function(e){e.forEach(e=>{e.isIntersecting&&e.target.classList.add("visible")})},observerOptions),modal=document.getElementById("imageModal"),modalImg=document.getElementById("modalImage"),prevBtn=modal.querySelector(".modal-prev"),nextBtn=modal.querySelector(".modal-next"),closeBtn=modal.querySelector(".modal-close");let artworks=[],currentIndex=-1;function showImage(e){if(e>=0&&e<artworks.length){let t=artworks[e];modalImg.src=t.src,modalImg.alt=t.alt,currentIndex=e}}function openModal(e){modal.style.display="flex",modal.setAttribute("aria-hidden","false"),showImage(e),document.addEventListener("keydown",keydownHandler)}function closeModal(){modal.style.display="none",modal.setAttribute("aria-hidden","true"),modalImg.src="",document.removeEventListener("keydown",keydownHandler)}const keydownHandler=function(e){"ArrowLeft"===e.key&&prevBtn.click(),"ArrowRight"===e.key&&nextBtn.click(),"Escape"===e.key&&closeModal()};document.addEventListener("DOMContentLoaded",function(){loadImages();let e=document.querySelectorAll(".fade-in");e.forEach(e=>{observer.observe(e)}),setTimeout(()=>{artworks=Array.from(document.querySelectorAll(".gallery .artwork img"))},1e3)}),document.addEventListener("click",function(e){let t=e.target.closest(".artwork");if(t&&artworks.length>0){let a=t.querySelector("img");if(a){let r=artworks.indexOf(a);-1!==r&&openModal(r)}}let o=document.getElementById("mobileNav"),l=document.querySelector(".mobile-menu");!o.classList.contains("active")||o.contains(e.target)||l.contains(e.target)||closeMobileMenu()}),closeBtn.addEventListener("click",closeModal),prevBtn.addEventListener("click",()=>showImage((currentIndex-1+artworks.length)%artworks.length)),nextBtn.addEventListener("click",()=>showImage((currentIndex+1)%artworks.length)),modal.addEventListener("click",e=>{e.target===modal&&closeModal()});let touchStartX=null;modal.addEventListener("touchstart",function(e){1===e.touches.length&&(touchStartX=e.touches[0].clientX)}),modal.addEventListener("touchend",function(e){if(null!==touchStartX&&1===e.changedTouches.length){let t=e.changedTouches[0].clientX-touchStartX;Math.abs(t)>50&&(t>0?prevBtn.click():nextBtn.click()),touchStartX=null}});
